# recipes/core/dev/meson.toml
#
# Meson - High productivity build system
#
# Modern build system focused on speed and ease of use.

[package]
name = "meson"
version = "1.7.0"
release = "1"
summary = "High productivity build system"
description = """
Meson is an open source build system meant to be both extremely
fast, and, even more importantly, as user friendly as possible.
It uses Ninja as its backend by default, and is used by many
projects including systemd, GNOME, and Mesa.
"""
license = "Apache-2.0"
homepage = "https://mesonbuild.com"

[source]
archive = "https://github.com/mesonbuild/meson/releases/download/%(version)s/meson-%(version)s.tar.gz"
checksum = "sha256:FIXME_ACTUAL_CHECKSUM"

[build]
requires = ["python", "ninja"]
makedepends = []

# Meson is a pure Python package
configure = ""
make = ""

install = """
python -m installer --destdir=%(destdir)s dist/*.whl 2>/dev/null || \
python setup.py install --root=%(destdir)s --prefix=/usr --optimize=1

# Ensure meson is executable
chmod 755 %(destdir)s/usr/bin/meson 2>/dev/null || true
"""

[variables]
jobs = "$(nproc)"
