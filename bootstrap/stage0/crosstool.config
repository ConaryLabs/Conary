# bootstrap/stage0/crosstool.config
#
# Crosstool-ng configuration for Conary Stage 0 toolchain
#
# This produces a static cross-compiler that can run on any Linux host
# and produces binaries for x86_64-conary-linux-gnu target.
#
# Build with: ct-ng build
# Result: /tools/x86_64-conary-linux-gnu/
#
# Key properties:
# - Static toolchain (no host shared library dependencies)
# - Uses glibc (not musl) for maximum compatibility
# - Targets x86-64-v2 (most modern x86_64 systems)
# - LTS kernel headers (6.18) for stability
#
# Versions (latest stable as of Jan 2026):
# - GCC 15.2
# - glibc 2.42
# - binutils 2.45.1
# - Linux 6.18 (LTS)
#
# NOTE: The CT_*_V_* variables depend on your crosstool-ng version.
# Run `ct-ng menuconfig` to see available versions and adjust as needed.

#
# Paths and misc options
#
CT_LOCAL_TARBALLS_DIR="${CT_TOP_DIR}/tarballs"
CT_WORK_DIR="${CT_TOP_DIR}/.build"
CT_PREFIX_DIR="/tools"
CT_REMOVE_DOCS=y
CT_STRIP_HOST_TOOLCHAIN_EXECUTABLES=y
CT_STRIP_TARGET_TOOLCHAIN_EXECUTABLES=y

#
# Target options
#
CT_ARCH_X86=y
CT_ARCH_64=y
CT_ARCH_ARCH="x86-64-v2"
CT_ARCH_CPU="x86-64"
CT_TARGET_VENDOR="conary"
CT_TARGET_ALIAS_SED_EXPR=""
CT_TARGET_ALIAS=""

#
# Toolchain options
#
CT_STATIC_TOOLCHAIN=y
CT_TOOLCHAIN_PKGVERSION="Conary Stage0 Toolchain"
CT_TOOLCHAIN_BUGURL="https://github.com/ConaryLabs/Conary/issues"

#
# Operating System
#
CT_KERNEL_LINUX=y
CT_LINUX_V_6_18=y
CT_LINUX_VERSION="6.18"

#
# Binary utilities
#
CT_BINUTILS_V_2_45=y
CT_BINUTILS_VERSION="2.45.1"
CT_BINUTILS_LINKER_LD_GOLD=n
CT_BINUTILS_GOLD_THREADS=n
CT_BINUTILS_PLUGINS=y
CT_BINUTILS_RELRO=y
CT_BINUTILS_DETERMINISTIC_ARCHIVES=y

#
# C compiler (GCC)
#
CT_CC_GCC=y
CT_CC_GCC_V_15=y
CT_CC_GCC_VERSION="15.2.0"
CT_CC_GCC_EXTRA_CONFIG_ARRAY="--disable-multilib --with-system-zlib"
CT_CC_GCC_BUILD_ID=y
CT_CC_GCC_LTO_ZSTD=y
CT_CC_GCC_ENABLE_DEFAULT_PIE=y
CT_CC_GCC_ENABLE_DEFAULT_SSP=y
CT_CC_GCC_ENABLE_CXX_FLAGS=""
CT_CC_GCC_CORE_EXTRA_CONFIG_ARRAY=""
CT_CC_GCC_EXTRA_LDFLAGS=""
CT_CC_GCC_STATIC_LIBSTDCXX=y
CT_CC_LANG_CXX=y
CT_CC_LANG_FORTRAN=n

#
# C library (glibc)
#
CT_LIBC_GLIBC=y
CT_GLIBC_V_2_42=y
CT_GLIBC_VERSION="2.42"
CT_GLIBC_EXTRA_CONFIG_ARRAY=""
CT_GLIBC_DISABLE_VERSIONING=n
CT_GLIBC_OLDEST_ABI="2.17"
CT_GLIBC_ENABLE_FORTIFIED_SOURCE=y
CT_GLIBC_ENABLE_DEBUG=y
CT_GLIBC_ENABLE_OBSOLETE_RPC=n
CT_GLIBC_EXTRA_CFLAGS=""
CT_GLIBC_EXTRA_LDFLAGS=""

#
# Companion libraries
#
CT_COMPLIBS_NEEDED_GMP=y
CT_COMPLIBS_NEEDED_MPFR=y
CT_COMPLIBS_NEEDED_MPC=y
CT_COMPLIBS_NEEDED_ISL=y
CT_COMPLIBS_NEEDED_ZLIB=y
CT_COMPLIBS_NEEDED_ZSTD=y

CT_GMP_V_6_3=y
CT_GMP_VERSION="6.3.0"
CT_MPFR_V_4_2=y
CT_MPFR_VERSION="4.2.1"
CT_MPC_V_1_3=y
CT_MPC_VERSION="1.3.1"
CT_ISL_V_0_26=y
CT_ISL_VERSION="0.26"
CT_ZLIB_V_1_3=y
CT_ZLIB_VERSION="1.3.1"
CT_ZSTD_V_1_5=y
CT_ZSTD_VERSION="1.5.6"

#
# Companion tools
#
CT_COMP_TOOLS_MAKE=y
CT_MAKE_V_4_4=y
CT_MAKE_VERSION="4.4.1"
CT_COMP_TOOLS_M4=y
CT_M4_V_1_4=y
CT_M4_VERSION="1.4.19"
CT_COMP_TOOLS_AUTOCONF=y
CT_AUTOCONF_V_2_72=y
CT_AUTOCONF_VERSION="2.72"
CT_COMP_TOOLS_AUTOMAKE=y
CT_AUTOMAKE_V_1_16=y
CT_AUTOMAKE_VERSION="1.16.5"

#
# Debug facilities
#
CT_DEBUG_GDB=n
CT_DEBUG_STRACE=n
CT_DEBUG_LTRACE=n
CT_DEBUG_DUMA=n

#
# Test suite
#
CT_TEST_SUITE_GCC=n
